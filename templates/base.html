{% load static %}
<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Shop Online for Men, Women & Kids - Snapdeal</title>
    
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet">
    <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css" rel="stylesheet">
    <link href="{% static 'css/style.css' %}" rel="stylesheet">
    <link href="https://fonts.googleapis.com/css2?family=Roboto:wght@300;400;500;700&display=swap" rel="stylesheet">

    <style>
        /* === GLOBAL STYLES === */
        body { font-family: 'Roboto', sans-serif; background-color: #f7f7f7; }
        
        .sticky-nav-wrapper {
            position: -webkit-sticky; 
            position: sticky;
            top: 0;
            z-index: 1000;
            background-color: #fff;
            box-shadow: 0 4px 10px rgba(0,0,0,0.05);
        }

        /* Dropdown & Menu Styles */
        .sd-header-main { position: relative !important; z-index: 5000 !important; }
        .dropdown-hover:hover .dropdown-menu-custom { display: block !important; }
        
        .menu-item-dark { color: #ccc; transition: all 0.2s; font-size: 13px; padding: 12px 20px; }
        .menu-item-dark:hover { color: #fff; background-color: #3e3e3e; }
        
        .dropdown-arrow {
            position: absolute; top: -6px; right: 25px; width: 0; height: 0;
            border-left: 6px solid transparent; border-right: 6px solid transparent; border-bottom: 6px solid #2e2e2e;
        }

        /* Footer Links */
        .footer-link { color: #888; text-decoration: none; font-size: 11px; line-height: 2; transition: color 0.2s; }
        .footer-link:hover { color: #333; }
        .social-icon { color: #ccc; font-size: 18px; transition: color 0.2s; }
        .social-icon:hover { color: #e40046; }
        .payment-icon { font-size: 24px; color: #555; }

        .modal-backdrop { z-index: 100040 !important; background-color: rgba(0, 0, 0, 0.6) !important; }
        .hover-red:hover { color: #e40046 !important; cursor: pointer; }
   
   
   /* --- RESET & VARIABLES --- */
:root {
    --snap-pink-light: #fdf1f2;
    --snap-red: #e40046;
    --snap-dark-gray: #333;
    --snap-light-gray: #555;
    --snap-border: #e9e9e9;
}

body {
    background-color: #f7f7f7;
    font-family: 'Roboto', sans-serif;
    margin:  0 10px ;
    padding: 0 5px ;
}

a { text-decoration: none; color: inherit; }




/* --- STICKY HEADER FIX --- */
.sd-sticky-header {
    position: sticky;       /* Enables sticky behavior */
    top: 0;                 /* Sticks exactly to the top of the browser */
    z-index: 1000;          /* Ensures it sits ABOVE the banners and content */
    background-color: white; /* Important: Prevents content from showing behind transparent areas */
    box-shadow: 0 2px 5px rgba(0,0,0,0.05); /* Adds a subtle shadow when scrolling */
}

/* Ensure the header and category bar don't conflict */
.sd-header-main {
    position: relative; /* Remove old sticky if present */
    z-index: 1001;
}

.sd-category-bar {
    position: relative;
    z-index: 1001; /* Ensure this is also high */
}

/* Custom Container */
/* .sd-container {
    max-width: 1400px;
    margin: 0 25px auto;
    padding: 0 15px;
} */
.sd-container {
    max-width: 1400px;       /* Keeps the content width fixed */
    width: 100%;             /* Ensures it takes space on smaller screens */
    margin: 0 auto;                   /* margin-left:0 auto;       /* Pushes from the left */                     /* margin-right:0 auto;      /* Pushes from the right = CENTERING */
    padding-left: 25px;
    padding-right: 25px;
}


/* --- 1. TOP BAR --- */
.sd-top-bar {
    padding: 20px; 
    background-color: var(--snap-pink-light);
    height: 50px;
    font-size: 15px;
    color: var(--snap-light-gray);
    border-bottom: 1px solid #fae6e8;
}
.sd-logo {
    display: flex;
    align-items: center;

}
.sd-logo-text {
    font-size: 30px;
    /* margin-left: 2px; */  
}
.top-link {
    color: #666;
    margin-left: 20px;
}
.top-link:hover { text-decoration: underline; }

/* --- 2. HEADER --- */
.sd-header-main {
    background-color: white;
    padding-top: 15px;
    padding-bottom: 15px;
    position: relative;
    z-index: 100;
}

/* --- MAPPING SC- CLASSES TO CSS --- */

/* The main container for Search + Actions */
.sc-49edc83e-3.gzXMQG {
    display: flex;
    flex-grow: 1;
    justify-content: flex-end; /* Pushes content to the right of logo */
    align-items: center;
}

/* The Search Wrapper */
.sc-49edc83e-6.dAtOvn {
    position: relative;
    flex-grow: 1;
    margin: 0 40px; /* Spacing around search */
    max-width: 700px;
}

/* The Search Input Box */
.sc-49edc83e-7.dDzjlt {
    background-color: #f4f4f4;
    height: 50px;
    border-radius: 10px;
    display: flex;
    align-items: center;
    position: relative;
    overflow: hidden;
    border: 1px solid #1d0404;
}

/* The Icon & Placeholder Text Wrapper */
.sc-49edc83e-8.elesjj {
    position: absolute;
    left: 10px;
    top: 50%;
    transform: translateY(-50%);
    display: flex;
    align-items: center;
    color: #666;
    pointer-events: none; /* Let clicks pass to input */
    z-index: 1;
}

.sc-49edc83e-8.elesjj svg {
    margin-right: 8px;
    width: 14px;
    height: 14px;
}

.sc-49edc83e-9.cdpKnw {
    font-size: 12px;
    color: #999;
}

.brand-and-products {
    color: #666; /* Slightly darker */
}

/* The Actual Input */
.search-box-input {
    width: 100%;
    height: 100%;
    border: none;
    background: transparent;
    padding-left: 120px; /* Push text past the icon/placeholder */
    outline: none;
    font-size: 13px;
    color: #333;
}

/* Actions (Login / Cart) */
.sc-49edc83e-4.hZtcpr {
    display: flex;
    flex-direction: column;
    align-items: center;
    cursor: pointer;
    margin-left: 25px;
    text-align: center;
    color: #555;
    font-size: 11px;
    font-weight: 600;
}

.sc-49edc83e-4.hZtcpr svg {
    margin-bottom: 2px;
    width: 20px;
    height: 20px;
}

/* Download App Button */
.sc-49edc83e-10.kOJxDN {
    background-color: #e40046;
    color: white;
    border: none;
    padding: 8px 20px;
    border-radius: 3px;
    font-weight: 600;
    font-size: 13px;
    margin-left: 30px;
    display: flex;
    align-items: center;
    gap: 5px;
    cursor: pointer;
}

.sc-49edc83e-10.kOJxDN:hover {
    background-color: #c7003d;
}

.sc-49edc83e-11.bEfrXA {
    display: inline-block;
}
/* --- 4. CATEGORY BAR (The Container) --- */
.sd-category-bar {
    background: white;
    border-top: 1px solid #f0f0f0;
    border-bottom: 1px solid #e0e0e0;
    position: relative; /* The Mega Menu will stick to THIS, not the scroll items */
    z-index: 900;
    height: 85px;
}

/* --- HORIZONTAL SCROLL (Hidden Scrollbar) --- */
.cat-scroll-view {
    display: flex;
    align-items: center;
    height: 100%;
    
    /* Enable Scroll */
    overflow-x: auto;
    
    /* Hide Scrollbar */
    -ms-overflow-style: none;  /* IE and Edge */
    scrollbar-width: none;  /* Firefox */
}

.cat-scroll-view::-webkit-scrollbar {
    display: none;
}

/* --- NAV ITEMS (The Trick) --- */
.sd-nav-item {
    height: 100%;
    display: flex;
    align-items: center;
    flex: 0 0 auto; /* Don't shrink */
    padding: 0 15px;
    
    /* CRITICAL FIX: 'static' allows the dropdown to escape this container */
    position: static; 
}

.sd-cat-item {
    height: 100%;
    display: flex;
    align-items: center;
    text-decoration: none;
    color: #333;
    border-bottom: 2px solid transparent;
}

.sd-cat-item:hover {
    color: #e40046;
    border-bottom: 2px solid #e40046;
}

.sd-cat-thumb {
    width: 35px;
    height: 35px;
    border-radius: 50%;
    margin-right: 10px;
    background-size: cover;
    background-position: center;
    border: 1px solid #eee;
}

/* --- 5. MEGA MENU (Full Width Fix) --- */
.sd-mega-menu {
    display: none; /* Hidden by default */
    position: absolute;
    left: 0;
    top: 85px; /* Pushes it exactly below the gray bar */
    max-width: 500px; /* Spans the full width of the screen */
  
    background-color: white;
    box-shadow: 0 4px 6px rgba(0,0,0,0.1);
    border-top: 1px solid #e0e0e0;
    z-index: 999;
    padding: 20px 0;
}

/* Show Menu on Hover */
.sd-nav-item:hover .sd-mega-menu {
    display: block;
}

/* /* Internal Layout of Mega Menu  */
.mega-content {
    max-width: 1400px; /* Matches your main container width */
    margin: 0 auto;
    max-height: 500px;
    padding: 0 5px;
    display: flex;
    flex-wrap: wrap;
    gap: 3px;
} 

.mega-column {
    width: 150px; /* Fixed width for columns */
}

.hover-red:hover {
    color: #e40046 !important;
    text-decoration: underline !important;
}



/* --- MAIN BANNER SLIDER --- */
.carousel-item img {
    height: 380px; /* Fixed height for consistency */
    object-fit: cover; /* Ensures image covers area without stretching */
    width: 100%;
}

/* Customizing the Prev/Next Buttons */
.carousel-control-prev-icon,
.carousel-control-next-icon {
    background-size: 50%, 50%;
    width: 40px;
    height: 40px;
}

/* Move indicators up slightly */
.carousel-indicators {
    bottom: 10px;
}

/* Active indicator color (Snapdeal Red or Gray) */
.carousel-indicators button {
    background-color: #ccc !important;
    width: 10px !important;
    height: 10px !important;
    border-radius: 50%;
    margin: 0 5px !important;
}

.carousel-indicators .active {
    background-color: #e40046 !important;
}


/* --- TRUST STRIP --- */
.trust-strip-container {
    background-color: #1a1a1a; /* Dark Black Background */
    padding: 20px 40px;
    border-radius: 5px;
    margin-bottom: 30px;
     border-radius: 10px;
}

.trust-box {
    background-color: white;
    border-radius: 50px; /* Fully rounded edges */
    padding: 15px 30px;
    display: flex;
    align-items: center;
    justify-content: center;
    gap: 20px;
    height: 100%;
    transition: transform 0.2s;
}

.trust-box:hover {
    transform: translateY(-2px); /* Slight lift on hover */
}

.trust-icon {
    font-size: 30px;
    color: #555;
}

.trust-text h5 {
    font-size: 15px;
    font-weight: 700;
    margin: 0;
    color: #333;
}

.trust-text p {
    font-size: 13px;
    margin: 0;
    color: #666;
}


/* --- DEAL OF THE DAY --- */
.deal-card {
    transition: transform 0.2s;
}

.deal-card:hover {
    transform: translateY(-5px); /* Lift effect on hover */
}

/* Scroll Buttons */
.deal-scroll-btn {
    position: absolute;
    top: 50%;
    transform: translateY(-50%);
    width: 45px;
    height: 45px;
    background-color: white;
    border: 1px solid #ddd;
    border-radius: 50%;
    box-shadow: 0 4px 6px rgba(0,0,0,0.1);
    z-index: 10;
    cursor: pointer;
    color: #555;
    display: flex;
    align-items: center;
    justify-content: center;
    transition: 0.2s;
}

.deal-scroll-btn:hover {
    box-shadow: 0 6px 12px rgba(0,0,0,0.2);
    color: #e40046;
}

.btn-left { left: -20px; }
.btn-right { right: -20px; }

/* Hide Scrollbar but keep functionality */
.hide-scrollbar::-webkit-scrollbar {
    display: none;
}
.hide-scrollbar {
    -ms-overflow-style: none;
    scrollbar-width: none;
}


/* --- MID STRIP ADS --- */
.mid-strip-box img {
    width: 100%;
    height: auto;       /* Maintains the image aspect ratio */
    object-fit: cover;  
    max-height: 450px;  /* Prevents it from being too tall on huge screens */
    transition: transform 0.3s ease;
}

.mid-strip-box:hover img {
    transform: scale(1.01); /* Subtle zoom effect when you hover over the ad */
}


/* --- NEW ARRIVALS RIBBON --- */
.new-in-badge {
    background-color: #72bf44; /* Snapdeal Green */
    color: white;
    font-size: 10px;
    font-weight: bold;
    text-align: center;
    padding: 4px 0;
    position: absolute;
    top: 0;
    left: 10px;
    right: 10px;
    border-radius: 4px 4px 0 0;
    z-index: 5;
    text-transform: uppercase;
    box-shadow: 0 2px 4px rgba(0,0,0,0.1);
}

/* Ensure the image box sits correctly below the ribbon */
.deal-img-box {
    position: relative;
    z-index: 1;
}

/* --- FOOTER BANNER --- */
.footer-banner-box img {
    width: 100%;
    height: auto;
    object-fit: cover;
    /* Optional: Limit height if the image is massive */
    max-height: 500px; 
}

/* --- EXPLORE GRID --- */
.explore-card {
    transition: box-shadow 0.2s, transform 0.2s;
    border-radius: 8px;
}

.explore-card:hover {
    box-shadow: 0 5px 15px rgba(0,0,0,0.1) !important;
    transform: translateY(-3px);
}

/* --- FOOTER STYLES --- */
.sd-footer {
    font-family: sans-serif;
    color: #333;
}

.footer-link {
    color: #666;
    text-decoration: none;
    font-size: 12px;
    line-height: 2;
    transition: color 0.2s;
}

.footer-link:hover {
    color: #e40046; /* Snapdeal Red on Hover */
    text-decoration: underline;
}

/* Payment Icons Styling */
.payment-icon {
    font-size: 24px;
    color: #555;
    background: #f4f4f4;
    padding: 2px 8px;
    border-radius: 4px;
    display: flex;
    align-items: center;
    border: 1px solid #ddd;
}

/* Social Icons Styling */
.social-icon {
    color: #fff;
    background-color: #333; /* Dark circles */
    width: 30px;
    height: 30px;
    display: flex;
    align-items: center;
    justify-content: center;
    border-radius: 50%;
    text-decoration: none;
    font-size: 14px;
    transition: background-color 0.2s;
}

.social-icon:hover {
    background-color: #e40046;
    color: white;
}
/* --- Z-INDEX LAYER FIX --- */

/* 1. White Header: HIGHEST Priority */
header.sticky-top {
    position: relative;
    z-index: 9999 !important; /* Higher than everything */
    overflow: visible !important; /* Let the menu spill out */
}

/* 2. Red Category Bar: LOWER Priority */
.bg-danger.shadow-sm {
    position: relative;
    z-index: 1 !important; /* Lower than header */
}

/* 3. Dropdown Menu: TOP Priority */
.dropdown-menu-custom {
    position: absolute !important;
    top: 100% !important;
    right: 0 !important;
    z-index: 10000 !important; /* Highest possible number */
    display: none;
    background-color: #212121;
    min-width: 230px;
    border-top: 3px solid #e40046;
    box-shadow: 0px 10px 40px rgba(0,0,0,0.5);
}

/* 4. Show on Hover */
.dropdown-hover:hover .dropdown-menu-custom {
    display: block !important;
}




/* 1. Force the Red Header Parent to be Higher than Categories */
    .sd-header-main {
        position: relative !important;
        z-index: 5000 !important; /* Forces it above the category bar */
    }
    /* 2. Ensure Dropdown is visible */
    .dropdown-hover:hover .dropdown-menu-custom {
        display: block !important;
    }

    /* Hover effect for left menu items */
.main-cat-item:hover {
    background-color: #f8f9fa;
    color: #e40046; /* Snapdeal brand color */
}
.main-cat-item:hover i {
    color: #e40046 !important;
}

/* Hover effect for right panel links */
.sub-link:hover {
    color: #e40046 !important;
    padding-left: 5px; /* Small animation effect */
    transition: all 0.2s ease;
}

/* Ensure the mega menu sits on top of other content like the carousel */
.category-menu-wrapper {
    box-shadow: 0 2px 4px rgba(0,0,0,0.05);
}
/* Hover effect for left menu items */
.main-cat-item:hover {
    background-color: #f8f9fa;
    color: #e40046; /* Snapdeal brand color */
}
.main-cat-item:hover i {
    color: #e40046 !important;
}

/* Hover effect for right panel links */
.sub-link:hover {
    color: #e40046 !important;
    padding-left: 5px; /* Small animation effect */
    transition: all 0.2s ease;
}

/* Ensure the mega menu sits on top of other content like the carousel */
.category-menu-wrapper {
    box-shadow: 0 2px 4px rgba(0,0,0,0.05);
}
   
   
   
   
   
   
   
   
   </style>

</head>
<body>

    <div class="sd-top-bar">
        <div class="sd-container d-flex justify-content-between align-items-center h-100">
            <div class="top-left d-flex align-items-center">
                <span class="top-text">FREE Delivery &nbsp;|&nbsp; 7 days Easy Returns &nbsp;|&nbsp; Best Prices</span>
            </div>
            <div class="top-right d-flex align-items-center">
                <a href="#" class="top-link">Our Blog</a>
                <a href="#" class="top-link">Help Center</a>
                <a href="#" class="top-link">Sell on Snapdeal</a>
            </div>
        </div>
    </div>

    <div class="sticky-nav-wrapper">
        <div class="sd-header-main bg-white">
            <div class="sd-container">
                <div class="d-flex align-items-center py-3 position-relative">
                    
                    <a href="{% url 'core:home' %}" class="sd-logo">
                        <svg xmlns="http://www.w3.org/2000/svg" width="32" height="32" viewBox="0 0 32 32" fill="none">
                            <path fill-rule="evenodd" clip-rule="evenodd" d="M8.15738 28.1934L2.89 18.8954C2.60878 18.4007 2.55767 18.036 2.78779 17.489L7.72255 5.32623C7.82505 5.06595 8.23418 5.01361 8.3875 5.27417L14.7801 16.5256C15.0613 17.0202 15.3682 17.2026 15.9307 17.2026H28.639C28.9202 17.2026 29.1247 17.5931 28.9459 17.8275L21.019 28.2454C20.661 28.7142 20.3544 28.8707 19.7916 28.8707H9.30798C8.74553 28.8707 8.43861 28.6883 8.15738 28.1934ZM21.3515 14.7544L18.9478 10.483H14.1152C13.5525 10.483 13.2458 10.3007 12.9646 9.80599L9.92165 4.44086C9.76833 4.15412 9.99845 3.76356 10.3051 3.76356H22.0164C22.5789 3.76356 22.8858 3.9459 23.167 4.44086L29.0226 14.7544C29.1759 15.0408 28.9458 15.4317 28.6388 15.4317H22.5021C21.9396 15.4317 21.6327 15.2493 21.3515 14.7544Z" fill="#FF2341"></path>
                        </svg>
                        <i><span class="sd-logo-text">snapdeal</span></i>
                    </a>
        
<div class="d-flex align-items-center; p-3">
    {% if '/category/' in request.path or '/product/' in request.path %}
    <div class="me-3 position-relative">
        <button class="btn btn-link text-white p-0 border-0" id="megaMenuBtn" style="font-size: 20px;">
            <i class="fas fa-bars"></i>
        </button>

        <div id="megaMenuDropdown" class="position-absolute bg-white shadow-lg text-start" 
             style="top: 45px; left: 0; width: 240px; display: none; z-index: 9999; border-radius: 2px;">
            <div class="p-3 border-bottom text-muted small fw-bold" style="background: #f4f4f4;">TOP CATEGORIES</div>
            <ul class="list-unstyled m-0 py-2">
                {% for cat in main_categories %}
                <li class="px-3 py-2 menu-hover-item">
                    <a href="{% url 'core:category_detail' cat.id %}" class="d-flex align-items-center text-decoration-none text-dark small">
                        {% if cat.image %}
                        <img src="{{ cat.image.url }}" class="rounded-circle me-3" width="28" height="28" style="object-fit:cover;">
                        {% endif %}
                        <span>{{ cat.name }}</span>
                    </a>
                </li>
                {% endfor %}
            </ul>
        </div>
    </div>
    {% endif %}

     <a href="{% url 'core:home' %}" class="d-flex align-items-center text-decoration-none"></a>
         <!-- <img src="https://i3.sdlcdn.com/img/snapdeal/ico/2015/image/sdLogo_white_2015.png" height="28"> 
    </a> -->

</div>
<script>
document.addEventListener("DOMContentLoaded", function() {
    const menuBtn = document.getElementById('megaMenuBtn');
    const menuDropdown = document.getElementById('megaMenuDropdown');

    if(menuBtn && menuDropdown) {
        menuBtn.addEventListener('click', function(e) {
            e.stopPropagation();
            menuDropdown.style.display = (menuDropdown.style.display === 'block') ? 'none' : 'block';
        });

        document.addEventListener('click', function(e) {
            if (!menuDropdown.contains(e.target) && e.target !== menuBtn) {
                menuDropdown.style.display = 'none';
            }
        });
    }
});
</script>




<style>
    
    .menu-hover-item:hover { background-color: #f8f8f8; }
    /* Modal Backdrop for Checkout */
    .checkout-modal .modal-content { border-radius: 8px; overflow: hidden; border: none; }
    .checkout-header { background-color: #e40046; color: white; padding-left: 15px; position: relative; }
</style>
                    <div class="sc-49edc83e-3 gzXMQG">
                        <div class="sc-49edc83e-6 dAtOvn">
                            <div class="sc-49edc83e-7 dDzjlt">
                                <input id="search-box-input" class="search-box-input" type="text" placeholder="Search for Brands & Products">
                                <div class="sc-49edc83e-8 elesjj"><i class="fas fa-search"></i></div>
                            </div>
                        </div>
                    </div>

                    <div class="dropdown-hover position-relative cursor-pointer text-center" style="min-width: 80px;">
                        <div class="sc-49edc83e-4 hZtcpr">
                            <i class="far fa-user-circle" style="font-size:22px;"></i>
                            <span class="sc-49edc83e-5 kYyUoL">{% if user.is_authenticated %}{{ user.username|truncatechars:8 }}{% else %}Sign In{% endif %}</span>
                        </div>
                        <div class="dropdown-menu-custom position-absolute top-100 end-0 mt-2 rounded shadow-lg text-start" style="width: 240px; display: none; background-color: #2e2e2e; z-index: 9999; padding-top: 0; overflow: visible;">
                            <div class="dropdown-arrow"></div>
                            <div class="d-flex flex-column py-1">
                                <a href="#" class="d-flex align-items-center text-decoration-none menu-item-dark"><i class="far fa-user me-2"></i> Your Account</a>
                               
                               
                                <a href="{% url 'orders:my_orders' %}" class="d-flex align-items-center text-decoration-none menu-item-dark"><i class="fas fa-box me-2"></i> Your Orders</a>
                                
                                
                                <a href="#" class="d-flex align-items-center text-decoration-none menu-item-dark"><i class="far fa-heart me-2"></i> Shortlist</a>
                            </div>
                            {% if not user.is_authenticated %}
                                <div class="border-top border-secondary mx-3 my-1"></div>
                                <div class="px-4 py-3 text-center">
                                    <p class="text-muted mb-1" style="font-size: 11px;">If you are a new user</p>
                                    <a href="{% url 'users:register' %}" class="fw-bold text-decoration-none text-white mb-3 d-block" style="font-size: 14px;">Register</a>
                                    <button class="btn btn-danger w-100 fw-bold rounded-1" style="background-color: #e40046; border: none; font-size: 13px; padding: 10px;" data-bs-toggle="modal" data-bs-target="#loginModal">LOGIN</button>
                                </div>
                            {% else %}
                                <div class="border-top border-secondary mx-3 my-1"></div>
                                <div class="p-3"><a href="{% url 'users:logout' %}" class="btn btn-danger w-100 fw-bold rounded-1" style="background-color: #e40046; border: none; font-size: 13px;">LOGOUT</a></div>
                            {% endif %}
                        </div>
                    </div>

                    <div style="position:relative" class="sc-49edc83e-4 hZtcpr">
                        <a href="{% url 'orders:view_cart' %}" id="headerCartLink" class="text-decoration-none text-white d-flex flex-column align-items-center">
                            <svg xmlns="http://www.w3.org/2000/svg" width="29" height="28" viewBox="0 0 29 28" fill="none"><path d="M4 2.91667L5.0663 3.2895C6.12422 3.6594 6.65318 3.84436 7.03071 4.22303C7.07924 4.2717 7.12559 4.3225 7.16964 4.37527C7.51228 4.78578 7.64818 5.32941 7.92 6.41667V6.41667M24.8367 7.58334H25M7.92 6.41667L9.55663 15.4181C9.88972 17.2502 10.0563 18.1662 10.7056 18.7081C11.3549 19.25 12.286 19.25 14.148 19.25H18.3254C20.0533 19.25 20.9172 19.25 21.5466 18.7652C22.176 18.2804 22.3965 17.4451 22.8375 15.7745L25 7.58334M7.92 6.41667L25 7.58334" stroke="#666666" stroke-width="1.75" stroke-linecap="round"></path><circle cx="1.16667" cy="1.16667" r="1.16667" transform="matrix(-1 0 0 1 20.3334 22.75)" fill="#666666" stroke="#666666" stroke-width="1.75"></circle><circle cx="1.16667" cy="1.16667" r="1.16667" transform="matrix(-1 0 0 1 12.1666 22.75)" fill="#666666" stroke="#666666" stroke-width="1.75"></circle><path d="M18.9171 14.5882L19.439 11.0785" stroke="#666666" stroke-width="1.75" stroke-linecap="round"></path><path d="M14.22 14.5833L13.6369 11.0832" stroke="#666666" stroke-width="1.75" stroke-linecap="round"></path></svg>
                        </a>
                        <span class="sc-49edc83e-5 kYyUoL">My Cart</span>
                    </div>
                    <div><button class="sc-49edc83e-10 kOJxDN"><span class="sc-49edc83e-11 bEfrXA">Download App</span></button></div>
                </div>
            </div>
        </div>

        <div class="sd-category-bar border-top border-bottom bg-white">
            <div class="sd-rcontaine h-50">
                <div class="cat-scroll-view d-flex align-items-center h-100">
                    {% if main_categories %}
                        {% for cat in main_categories %}
                        <div class="sd-nav-item">
                            <a href=" " class="sd-cat-item">
                                {% if cat.image %}<div class="sd-cat-thumb" style="background-image: url('{{ cat.image.url }}');"></div>
                                {% else %}<div class="sd-cat-thumb d-flex align-items-center justify-content-center bg-light border"><span class="fw-bold text-muted">{{ cat.name|slice:":1" }}</span></div>{% endif %}
                                <span class="sd-cat-name small fw-normal text-nowrap">{{ cat.name }}</span>
                            </a>
                            <div class="sd-mega-menu">
                                <div class="mega-content">
                                    {% for sub in cat.children.all %}
                                    <div class="mega-column">
                                        <h6 class="fw-bold text-dark border-bottom pb-2 mb-2">{{ sub.name }}</h6>
                                        <ul class="list-unstyled mb-3">
                                            {% for child in sub.children.all %}
                                            <li class="mb-1"><a href="#" class="text-muted small text-decoration-none hover-red">{{ child.name }}</a></li>
                                            {% endfor %}
                                        </ul>
                                    </div>
                                    {% endfor %}
                                </div>
                            </div>
                        </div>
                        {% endfor %}
                    {% endif %}
                </div>
            </div>
        </div>
    </div>

    {% block content %}
    {% endblock %}

    <footer class="sd-footer border-top bg-white mt-5 pt-5">
        <div class="sd-container">
            <div class="row">
                <div class="col-md-3 mb-4">
                    <h6 class="fw-bold text-uppercase small mb-3">Policy Info</h6>
                    <ul class="list-unstyled">
                        <li><a href="#" class="footer-link">Privacy Policy</a></li>
                        <li><a href="#" class="footer-link">Terms of Sale</a></li>
                        <li><a href="#" class="footer-link">Terms of Use</a></li>
                        <li><a href="#" class="footer-link">Report Abuse & Takedown Policy</a></li>
                        <li><a href="#" class="footer-link">FAQ</a></li>
                    </ul>
                </div>
                <div class="col-md-3 mb-4">
                    <h6 class="fw-bold text-uppercase small mb-3">Company</h6>
                    <ul class="list-unstyled">
                        <li><a href="#" class="footer-link">About Us</a></li>
                        <li><a href="#" class="footer-link">Core Values</a></li>
                        <li><a href="#" class="footer-link">Careers</a></li>
                        <li><a href="#" class="footer-link">Contact Us</a></li>
                    </ul>
                </div>
                <div class="col-md-3 mb-4">
                    <h6 class="fw-bold text-uppercase small mb-3">Snapdeal Business</h6>
                    <ul class="list-unstyled">
                        <li><a href="#" class="footer-link">Shopping App</a></li>
                        <li><a href="#" class="footer-link">Sell on Snapdeal</a></li>
                        <li><a href="#" class="footer-link">Media Enquiries</a></li>
                    </ul>
                </div>
                <div class="col-md-3 mb-4">
                    <h6 class="fw-bold text-uppercase small mb-3">Popular Links</h6>
                    <ul class="list-unstyled">
                        <li><a href="#" class="footer-link">Lehenga</a></li>
                        <li><a href="#" class="footer-link">Kid's Clothing</a></li>
                        <li><a href="#" class="footer-link">Sarees</a></li>
                        <li><a href="#" class="footer-link">Winter Wear</a></li>
                    </ul>
                </div>
            </div>
            <hr class="my-4 text-muted">
            <div class="row align-items-center pb-4">
                <div class="col-md-6">
                    <h6 class="fw-bold text-uppercase small mb-2">Payment</h6>
                    <div class="d-flex gap-2">
                        <div class="payment-icon"><i class="fab fa-cc-visa"></i></div>
                        <div class="payment-icon"><i class="fab fa-cc-mastercard"></i></div>
                        <div class="payment-icon"><i class="fas fa-rupee-sign"></i> COD</div>
                    </div>
                </div>
                <div class="col-md-6 text-md-end mt-3 mt-md-0">
                    <h6 class="fw-bold text-uppercase small mb-2">Connect</h6>
                    <div class="d-flex gap-3 justify-content-md-end">
                        <a href="#" class="social-icon"><i class="fab fa-facebook-f"></i></a>
                        <a href="#" class="social-icon"><i class="fab fa-twitter"></i></a>
                        <a href="#" class="social-icon"><i class="fab fa-instagram"></i></a>
                    </div>
                </div>
            </div>
            <div class="text-center pb-4 small text-muted">
                Copyright Â© 2026, Snapdeal Limited. All Rights Reserved
            </div>
        </div>
    </footer>

    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.bundle.min.js"></script>

    <div class="modal fade" id="emptyCartModal" tabindex="-1" aria-hidden="true" data-bs-backdrop="static" style="z-index: 100050 !important;">
        <div class="modal-dialog modal-lg modal-dialog-centered" style="max-width: 850px;">
            <div class="modal-content rounded-1 border-0 p-0" style="background-color: #ffffff !important; box-shadow: 0 10px 30px rgba(0,0,0,0.5);">
                <button type="button" class="btn-close position-absolute top-0 end-0 m-4" data-bs-dismiss="modal" aria-label="Close" style="z-index: 100060;"></button>
                <div class="modal-body text-center pt-5 pb-5">
                    <h5 class="fw-normal mb-2" style="color: #333; font-size: 18px;">Shopping Cart is empty!</h5>
                    <p class="text-muted small mb-5">Browse Categories</p>
                    <a href="{% url 'core:home' %}" class="btn btn-danger px-5 py-3 fw-bold rounded-1 text-white text-uppercase">Start Shopping Now</a>
                </div>
            </div>
        </div>
    </div>

    <div class="modal fade" id="loginModal" tabindex="-1" aria-hidden="true" style="z-index: 100051;">
      <div class="modal-dialog modal-dialog-centered">
        <div class="modal-content shadow-lg" style="border-radius: 4px; border: none;">
           <div class="modal-header border-0 pb-0"><button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button></div>
           <div class="modal-body text-center pt-0 px-5 pb-5">
              <h5 class="text-muted mb-2">Login/Sign Up On Snapdeal</h5>
              <p class="small text-muted mb-4" style="font-size: 11px;">Please provide your Mobile Number to Login/ Sign Up</p>
              <div id="modalError" class="text-danger small mb-2" style="display:none;"></div>
              <div id="step1">
                  <input type="text" id="modalMobileInput" class="form-control rounded-0 mb-3" placeholder="Mobile Number" style="font-size: 13px;">
                  <button type="button" id="getOtpBtn" class="btn btn-danger w-100 rounded-1 fw-bold" style="background-color: #e40046; border: none; font-size: 13px; padding: 10px;">CONTINUE</button>
              </div>
              <form id="step2" method="POST" action="{% url 'users:login' %}" style="display:none;">
                  {% csrf_token %}
                  <input type="hidden" name="login_type" value="otp">
                  <input type="hidden" name="mobile_or_username" id="hiddenMobile">
                  <p class="text-success small fw-bold">OTP Sent! Check your phone.</p>
                  <input type="text" name="otp_code" class="form-control rounded-0 mb-3" placeholder="Enter 6-digit OTP" style="font-size: 13px;" required>
                  <button type="submit" class="btn btn-danger w-100 rounded-1 fw-bold" style="background-color: #e40046; border: none; font-size: 13px; padding: 10px;">LOGIN</button>
              </form>
              <div class="mt-4 small"><p class="text-muted">or Login Using</p><button class="btn btn-sm btn-outline-secondary w-100">Google</button></div>
           </div>
        </div>
      </div>
    </div>

    <script>
    document.addEventListener("DOMContentLoaded", function() {
        const otpBtn = document.getElementById('getOtpBtn');
        const cartLink = document.getElementById("headerCartLink");
        const cartCount = parseInt("{% if user.is_authenticated %}{{ cart_count|default:'0' }}{% else %}0{% endif %}");

        if (cartLink) {
            cartLink.addEventListener("click", function(e) {
                if (cartCount === 0) {
                    e.preventDefault(); 
                    const emptyModalElement = document.getElementById('emptyCartModal');
                    const emptyModal = new bootstrap.Modal(emptyModalElement);
                    emptyModal.show();
                }
            });
        }

        if(otpBtn) {
            otpBtn.addEventListener('click', function() {
                var mobile = document.getElementById('modalMobileInput').value;
                var errorDiv = document.getElementById('modalError');
                var step1 = document.getElementById('step1');
                var step2 = document.getElementById('step2');
                var hiddenMobile = document.getElementById('hiddenMobile');
                var btn = document.getElementById('getOtpBtn');

                if (mobile.length < 10) { errorDiv.innerText = "Please enter a valid 10-digit mobile number."; errorDiv.style.display = "block"; return; }
                btn.innerText = "CHECKING..."; errorDiv.style.display = "none";

                fetch("{% url 'users:check_user' %}?mobile=" + mobile).then(response => response.json()).then(data => {
                    if (data.exists) {
                        btn.innerText = "SENDING OTP...";
                        fetch("{% url 'users:send_otp' %}", { method: 'POST', headers: { 'Content-Type': 'application/x-www-form-urlencoded' }, body: 'mobile=' + mobile })
                        .then(res => res.json()).then(otpData => {
                            if(otpData.status) { step1.style.display = "none"; step2.style.display = "block"; hiddenMobile.value = mobile; } 
                            else { errorDiv.innerText = otpData.message; errorDiv.style.display = "block"; btn.innerText = "CONTINUE"; }
                        });
                    } else { btn.innerText = "REDIRECTING..."; window.location.href = "{% url 'users:register' %}?mobile=" + mobile; }
                }).catch(error => { console.error('Error:', error); errorDiv.innerText = "Something went wrong."; errorDiv.style.display = "block"; btn.innerText = "CONTINUE"; });
            });
        }
    });
    </script>
</body>
</html>